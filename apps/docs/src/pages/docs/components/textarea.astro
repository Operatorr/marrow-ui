---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadFull } from "../../../utils/template-loader";

const textareaCode = loadFull("textarea");
---

<DocsLayout title="Textarea" description="A multi-line text input field" activeComponent="textarea">
  <div class="space-y-12">

    <!-- Hero -->
    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Form Controls</span>
        <span class="docs-badge-primary docs-badge">Pure CSS</span>
      </div>
      <h1 class="docs-hero-title">Textarea</h1>
      <p class="docs-hero-description mt-3">A multi-line text input for longer form content like messages, descriptions, and comments.</p>
    </header>

    <!-- Preview -->
    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Basic</p>
          <div class="space-y-2 max-w-lg">
            <label for="message" class="mw-label">Your message</label>
            <textarea id="message" class="mw-textarea" placeholder="Share your thoughts..."></textarea>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">With Description</p>
          <div class="space-y-2 max-w-lg">
            <label for="feedback" class="mw-label">Feedback</label>
            <textarea id="feedback" class="mw-textarea" placeholder="Tell us what you think..."></textarea>
            <p class="text-sm text-muted-foreground">Your feedback helps us improve.</p>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">With Pre-filled Content</p>
          <div class="space-y-2 max-w-lg">
            <label for="bio" class="mw-label">Biography</label>
            <textarea id="bio" class="mw-textarea">A passionate developer focused on building accessible and performant web applications. Enjoys working with modern JavaScript frameworks and advocating for user-centered design.</textarea>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">With Character Count</p>
          <div class="space-y-2 max-w-lg" x-data="{ message: '', maxChars: 280 }">
            <label for="tweet" class="mw-label">Message</label>
            <textarea
              id="tweet"
              class="mw-textarea"
              x-model="message"
              :maxlength="maxChars"
              placeholder="What's happening?"
            ></textarea>
            <p class="text-sm text-muted-foreground" x-text="`${message.length} / ${maxChars} characters`"></p>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Disabled</p>
          <div class="space-y-2 max-w-lg">
            <label for="disabled-textarea" class="mw-label text-muted-foreground">Comments (Closed)</label>
            <textarea id="disabled-textarea" class="mw-textarea" disabled placeholder="Comments are currently disabled..."></textarea>
            <p class="text-sm text-muted-foreground">This field is currently unavailable.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- In Context -->
    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="mx-auto max-w-md rounded-lg border border-border bg-card p-6 space-y-6" x-data="{ comment: '', maxChars: 500 }">
          <div>
            <h3 class="font-heading text-lg font-semibold">Leave Feedback</h3>
            <p class="text-sm text-muted-foreground mt-1">We'd love to hear what you think about this feature.</p>
          </div>

          <div class="space-y-4">
            <div class="space-y-2">
              <label for="ctx-name" class="mw-label">Name</label>
              <input type="text" id="ctx-name" class="mw-input" placeholder="Your name" autocomplete="name" />
            </div>

            <div class="space-y-2">
              <label for="ctx-email" class="mw-label">Email</label>
              <input type="email" id="ctx-email" class="mw-input" placeholder="you@example.com" autocomplete="email" />
            </div>

            <div class="space-y-2">
              <label for="ctx-comment" class="mw-label">Comment <span class="text-destructive">*</span></label>
              <textarea
                id="ctx-comment"
                class="mw-textarea"
                x-model="comment"
                :maxlength="maxChars"
                placeholder="Share your thoughts, suggestions, or report an issue..."
                rows="5"
                required
              ></textarea>
              <div class="flex justify-between">
                <p class="text-sm text-muted-foreground">Markdown is supported.</p>
                <p class="text-sm text-muted-foreground" x-text="`${comment.length} / ${maxChars}`"></p>
              </div>
            </div>
          </div>

          <button type="button" class="mw-btn mw-btn-primary w-full">Submit Feedback</button>
        </div>
      </div>
    </section>

    <!-- Code -->
    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={textareaCode} lang="html" />
      </div>
    </section>

    <!-- API Reference -->
    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="overflow-x-auto rounded-lg border border-border">
        <table class="docs-api-table">
          <thead><tr><th>Class</th><th>Description</th></tr></thead>
          <tbody>
            <tr><td><code>mw-textarea</code></td><td>Base textarea styling with border, padding, focus states, and vertical resize</td></tr>
            <tr><td><code>mw-label</code></td><td>Form label styling</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Guidelines -->
    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Always pair textareas with <code>label</code> elements using <code>for</code> and <code>id</code> attributes</li>
            <li>Use descriptive placeholder text that provides examples, not instructions</li>
            <li>Add <code>aria-describedby</code> when including helper text or character counts</li>
            <li>Use <code>aria-invalid</code> and <code>aria-errormessage</code> for validation states</li>
            <li>Consider setting <code>rows</code> attribute for consistent height (default min-height is 5rem)</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Use character counts when enforcing length limits to help users stay within bounds</li>
            <li>Provide helper text below the textarea to explain formatting requirements or usage</li>
            <li>Disable vertical resize with <code>resize-none</code> only when necessary</li>
            <li>Use appropriate autocomplete attributes for known data types (e.g., <code>autocomplete="street-address"</code>)</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
