---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";

const toastCode = `<!-- Trigger buttons -->
<button class="mw-btn mw-btn-primary"
        @click="$store.toasts.add({ type: 'success', title: 'Success', message: 'Your changes have been saved.' })">
  Success Toast
</button>

<button class="mw-btn mw-btn-destructive"
        @click="$store.toasts.add({ type: 'error', title: 'Error', message: 'Something went wrong.' })">
  Error Toast
</button>

<button class="mw-btn mw-btn-outline"
        @click="$store.toasts.add({ type: 'info', title: 'Info', message: 'A new update is available.' })">
  Info Toast
</button>

<!-- Toast container (place once, at the bottom of your page) -->
<div x-data
     class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"
     style="pointer-events: none;">
  <template x-for="toast in $store.toasts.items" :key="toast.id">
    <div class="mw-card flex items-start gap-3 min-w-[20rem] max-w-sm shadow-lg"
         style="pointer-events: auto;"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 translate-y-2"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-2">
      <!-- Icon (conditional on toast.type) -->
      <template x-if="toast.type === 'success'">
        <svg class="w-5 h-5 text-green-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
      </template>
      <template x-if="toast.type === 'error'">
        <svg class="w-5 h-5 text-red-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>
      </template>
      <template x-if="toast.type === 'info'">
        <svg class="w-5 h-5 text-blue-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
      </template>
      <!-- Content -->
      <div class="flex-1 min-w-0">
        <p class="font-medium text-sm" x-text="toast.title"></p>
        <p class="text-sm text-muted-foreground" x-text="toast.message"></p>
      </div>
      <!-- Close button -->
      <button @click="$store.toasts.remove(toast.id)"
              class="shrink-0 text-muted-foreground hover:text-foreground transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
      </button>
    </div>
  </template>
</div>`;
---

<DocsLayout title="Toast" description="Temporary notification messages that appear at the bottom-right" activeComponent="toast">
  <div class="space-y-8">
    <div>
      <h1 class="font-heading text-3xl font-bold tracking-tight">Toast</h1>
      <p class="mt-2 text-lg text-muted-foreground">Brief notification messages that appear temporarily and dismiss automatically.</p>
    </div>

    <div class="mw-separator"></div>

    <!-- Preview -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Preview</h2>
      <div class="mw-card p-6">
        <p class="text-sm text-muted-foreground mb-4">Click a button to trigger a toast notification in the bottom-right corner.</p>
        <div class="flex flex-wrap gap-3">
          <button class="mw-btn mw-btn-primary"
                  @click="$store.toasts.add({ type: 'success', title: 'Success', message: 'Your changes have been saved.' })">
            Success Toast
          </button>
          <button class="mw-btn mw-btn-destructive"
                  @click="$store.toasts.add({ type: 'error', title: 'Error', message: 'Something went wrong. Please try again.' })">
            Error Toast
          </button>
          <button class="mw-btn mw-btn-outline"
                  @click="$store.toasts.add({ type: 'info', title: 'Info', message: 'A new update is available.' })">
            Info Toast
          </button>
        </div>
      </div>
    </div>

    <!-- Toast container (always present on page) -->
    <div x-data
         class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"
         style="pointer-events: none;">
      <template x-for="toast in $store.toasts.items" :key="toast.id">
        <div class="mw-card flex items-start gap-3 min-w-[20rem] max-w-sm shadow-lg"
             style="pointer-events: auto;"
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 translate-y-2"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 translate-y-2">
          <!-- Icon -->
          <template x-if="toast.type === 'success'">
            <svg class="w-5 h-5 text-green-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>
          </template>
          <template x-if="toast.type === 'error'">
            <svg class="w-5 h-5 text-red-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>
          </template>
          <template x-if="toast.type === 'info'">
            <svg class="w-5 h-5 text-blue-500 shrink-0 mt-0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
          </template>
          <!-- Content -->
          <div class="flex-1 min-w-0">
            <p class="font-medium text-sm" x-text="toast.title"></p>
            <p class="text-sm text-muted-foreground" x-text="toast.message"></p>
          </div>
          <!-- Close -->
          <button @click="$store.toasts.remove(toast.id)" class="shrink-0 text-muted-foreground hover:text-foreground transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
          </button>
        </div>
      </template>
    </div>

    <!-- Code -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Code</h2>
      <CodeBlock code={toastCode} lang="html" />
    </div>

    <!-- Usage -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Usage</h2>
      <div class="mw-card p-6">
        <div class="prose prose-neutral dark:prose-invert max-w-none">
          <p class="text-sm text-muted-foreground">Toasts are managed via an Alpine.js global store. Access <code class="text-xs">Alpine.store('toasts')</code> to trigger notifications.</p>
          <h3 class="text-base font-semibold mt-4 mb-2">Alpine.store('toasts')</h3>
          <ul class="text-sm space-y-2">
            <li><strong>items</strong> (Array): Active toast notifications</li>
            <li><strong>add(toast)</strong>: Add a new toast
              <ul class="mt-1 space-y-1">
                <li><code class="text-xs">type</code>: <code class="text-xs">'success'</code>, <code class="text-xs">'error'</code>, or <code class="text-xs">'info'</code></li>
                <li><code class="text-xs">title</code>: Main heading text</li>
                <li><code class="text-xs">message</code>: Supporting message text</li>
                <li><code class="text-xs">duration</code>: Auto-dismiss time in milliseconds (default: 5000)</li>
              </ul>
            </li>
            <li><strong>remove(id)</strong>: Manually remove a toast by ID</li>
          </ul>
          <h3 class="text-base font-semibold mt-4 mb-2">Example</h3>
          <pre class="text-xs bg-muted p-3 rounded-md overflow-x-auto"><code set:html={`// Trigger a toast from Alpine.js
$store.toasts.add({
  type: 'success',
  title: 'File uploaded',
  message: 'Your document has been uploaded successfully.',
  duration: 3000
})

// Trigger from vanilla JS
Alpine.store('toasts').add({
  type: 'error',
  title: 'Upload failed',
  message: 'Please check your connection and try again.'
})`} /></pre>
        </div>
      </div>
    </div>

  </div>
</DocsLayout>
