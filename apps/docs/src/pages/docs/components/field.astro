---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadFull } from "../../../utils/template-loader";

const fieldCode = loadFull("field");
---

<DocsLayout title="Field" description="A complete form field pattern combining label, input, and helper text" activeComponent="field">
  <div class="space-y-12">

    <!-- Hero -->
    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Form Controls</span>
        <span class="docs-badge-primary docs-badge">Pure CSS</span>
      </div>
      <h1 class="docs-hero-title">Field</h1>
      <p class="docs-hero-description mt-3">A complete form field pattern combining label, input, and helper text for accessible and user-friendly forms.</p>
    </header>

    <!-- Preview -->
    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Basic with Helper Text</p>
          <div class="max-w-md">
            <div class="space-y-2">
              <label for="preview-name" class="mw-label">Name</label>
              <input id="preview-name" type="text" class="mw-input"
                     placeholder="Enter your name"
                     aria-describedby="preview-name-desc" />
              <p id="preview-name-desc" class="text-sm text-muted-foreground">
                This is your public display name.
              </p>
            </div>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Required Field</p>
          <div class="max-w-md">
            <div class="space-y-2">
              <label for="preview-email" class="mw-label">
                Email <span class="text-destructive">*</span>
              </label>
              <input id="preview-email" type="email" class="mw-input"
                     placeholder="you@example.com" required
                     aria-describedby="preview-email-desc" />
              <p id="preview-email-desc" class="text-sm text-muted-foreground">
                We will never share your email.
              </p>
            </div>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Error State</p>
          <div class="max-w-md">
            <div class="space-y-2">
              <label for="preview-error" class="mw-label">Username</label>
              <input id="preview-error" type="text" class="mw-input" value="ab"
                     aria-invalid="true" aria-describedby="preview-error-msg"
                     style="border-color: hsl(var(--marrow-destructive));" />
              <p id="preview-error-msg" class="text-sm" role="alert"
                 style="color: hsl(var(--marrow-destructive));">
                Username must be at least 3 characters.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- In Context -->
    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="rounded-lg border border-border max-w-md mx-auto">
          <div class="px-5 py-4 border-b border-border flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
              <line x1="19" x2="19" y1="8" y2="14"/>
              <line x1="22" x2="16" y1="11" y2="11"/>
            </svg>
            <span class="font-heading font-semibold text-sm">Create Account</span>
          </div>
          <form class="p-5 space-y-5">
            <div class="space-y-2">
              <label for="reg-fullname" class="mw-label">
                Full Name <span class="text-destructive">*</span>
              </label>
              <input id="reg-fullname" type="text" class="mw-input"
                     placeholder="Jane Smith" required />
            </div>

            <div class="space-y-2">
              <label for="reg-email" class="mw-label">
                Email <span class="text-destructive">*</span>
              </label>
              <input id="reg-email" type="email" class="mw-input"
                     placeholder="jane@example.com" required
                     aria-describedby="reg-email-desc" />
              <p id="reg-email-desc" class="text-sm text-muted-foreground">
                We'll send a confirmation link to this address.
              </p>
            </div>

            <div class="space-y-2">
              <label for="reg-username" class="mw-label">
                Username <span class="text-destructive">*</span>
              </label>
              <input id="reg-username" type="text" class="mw-input" value="jn"
                     aria-invalid="true" aria-describedby="reg-username-err" required
                     style="border-color: hsl(var(--marrow-destructive));" />
              <p id="reg-username-err" class="text-sm" role="alert"
                 style="color: hsl(var(--marrow-destructive));">
                Username must be at least 3 characters.
              </p>
            </div>

            <div class="space-y-2">
              <label for="reg-password" class="mw-label">
                Password <span class="text-destructive">*</span>
              </label>
              <input id="reg-password" type="password" class="mw-input"
                     placeholder="At least 8 characters" required
                     aria-describedby="reg-password-desc" />
              <p id="reg-password-desc" class="text-sm text-muted-foreground">
                Must contain uppercase, lowercase, and a number.
              </p>
            </div>

            <div class="space-y-2">
              <label for="reg-bio" class="mw-label">Bio</label>
              <textarea id="reg-bio" class="mw-input min-h-[80px]"
                        placeholder="Tell us about yourself..."
                        aria-describedby="reg-bio-desc"></textarea>
              <p id="reg-bio-desc" class="text-sm text-muted-foreground">
                Optional. Max 160 characters.
              </p>
            </div>

            <button type="submit" class="mw-btn mw-btn-primary w-full">
              Create Account
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- Code -->
    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={fieldCode} lang="html" />
      </div>
    </section>

    <!-- API Reference -->
    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="overflow-x-auto rounded-lg border border-border">
        <table class="docs-api-table">
          <thead>
            <tr>
              <th>Class</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>mw-label</code></td>
              <td>Form label styling with proper font weight and size</td>
            </tr>
            <tr>
              <td><code>mw-input</code></td>
              <td>Base input styling with border, padding, and focus states</td>
            </tr>
            <tr>
              <td><code>mw-card</code></td>
              <td>Card container for grouping form sections</td>
            </tr>
            <tr>
              <td><code>mw-btn</code></td>
              <td>Button base class for form submissions</td>
            </tr>
            <tr>
              <td><code>mw-btn-primary</code></td>
              <td>Primary button variant for submit actions</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Guidelines -->
    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Always associate labels with inputs using <code>for</code> and <code>id</code> attributes</li>
            <li>Use <code>aria-describedby</code> to link helper or error text to the input</li>
            <li>Add <code>aria-invalid="true"</code> on inputs with validation errors</li>
            <li>Use <code>role="alert"</code> on error messages so they are announced by screen readers</li>
            <li>Mark required fields with the <code>required</code> attribute and a visual indicator</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Wrap each field in a <code>space-y-2</code> container for consistent spacing</li>
            <li>Use <code>mw-label</code> with a <code>for</code> attribute matching the input's <code>id</code></li>
            <li>Helper text uses <code>text-sm text-muted-foreground</code> for secondary information</li>
            <li>Error text uses <code>text-sm</code> with the destructive color for validation messages</li>
            <li>Group related fields inside a card with <code>space-y-6</code> for vertical rhythm</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
