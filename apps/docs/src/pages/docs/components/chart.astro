---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadTemplate } from "../../../utils/template-loader";

const t = loadTemplate("chart");
const horizontalChartCode = t.sections.get("Horizontal Chart")!;
const verticalChartCode = t.sections.get("Vertical Chart")!;
const chartJsCode = t.sections.get("Chart.js")!;
---

<DocsLayout title="Chart" description="CSS-only bar chart patterns for simple data visualization using Marrow theme colors" activeComponent="chart">
  <div class="space-y-12">

    <!-- Hero -->
    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Data Display</span>
        <span class="docs-badge-primary docs-badge">Alpine.js</span>
      </div>
      <h1 class="docs-hero-title">Chart</h1>
      <p class="docs-hero-description mt-3">CSS-only bar chart patterns for simple data visualization using Marrow theme colors. No JavaScript required for static charts.</p>
    </header>

    <!-- Preview -->
    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Horizontal Bar Chart</p>
          <div class="max-w-lg">
            <h3 class="font-heading font-semibold mb-1">Monthly Revenue</h3>
            <p class="text-sm text-muted-foreground mb-4">Jan &ndash; Jun 2025</p>
            <div class="space-y-3">
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">Jan</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 65%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$6,500</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">Feb</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 78%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$7,800</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">Mar</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 52%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$5,200</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">Apr</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 90%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$9,000</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">May</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 72%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$7,200</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-xs text-muted-foreground w-8 text-right shrink-0">Jun</span>
                <div class="flex-1 h-7 bg-muted/40 rounded-sm overflow-hidden">
                  <div class="h-full bg-primary rounded-sm" style="width: 100%;"></div>
                </div>
                <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$10,000</span>
              </div>
            </div>
          </div>
        </div>

        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Vertical Bar Chart</p>
          <div class="max-w-md">
            <h3 class="font-heading font-semibold mb-1">Page Views</h3>
            <p class="text-sm text-muted-foreground mb-4">Weekly traffic</p>
            <div class="flex items-end justify-between gap-3 h-40">
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 65%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Mon</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 78%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Tue</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 52%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Wed</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 90%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Thu</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 72%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Fri</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 100%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Sat</span>
              </div>
              <div class="flex flex-col items-center gap-2 flex-1">
                <div class="w-full bg-muted/40 rounded-sm flex-1 flex items-end overflow-hidden">
                  <div class="w-full bg-primary rounded-sm" style="height: 85%;"></div>
                </div>
                <span class="text-xs text-muted-foreground">Sun</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- In Context -->
    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Dashboard Analytics Panel</p>
        <div class="rounded-lg border border-border overflow-hidden">
          <div class="p-4 border-b border-border">
            <h3 class="font-heading font-semibold text-sm">Analytics Overview</h3>
            <p class="text-xs text-muted-foreground mt-1">Key metrics for the current quarter</p>
          </div>
          <div class="p-4">
            <!-- Metric Cards -->
            <div class="grid grid-cols-3 gap-3 mb-6">
              <div class="rounded-lg border border-border p-3">
                <p class="text-xs text-muted-foreground">Total Revenue</p>
                <p class="text-xl font-bold mt-1">$45,700</p>
                <p class="text-xs text-green-500 mt-1">+12.5% from last quarter</p>
              </div>
              <div class="rounded-lg border border-border p-3">
                <p class="text-xs text-muted-foreground">Visitors</p>
                <p class="text-xl font-bold mt-1">28,340</p>
                <p class="text-xs text-green-500 mt-1">+8.2% from last quarter</p>
              </div>
              <div class="rounded-lg border border-border p-3">
                <p class="text-xs text-muted-foreground">Conversion</p>
                <p class="text-xl font-bold mt-1">3.6%</p>
                <p class="text-xs text-destructive mt-1">-0.4% from last quarter</p>
              </div>
            </div>
            <!-- Mini Chart -->
            <div>
              <h4 class="font-heading font-semibold text-xs mb-3">Revenue Trend</h4>
              <div class="space-y-2">
                <div class="flex items-center gap-3">
                  <span class="text-xs text-muted-foreground w-6 text-right shrink-0">Q1</span>
                  <div class="flex-1 h-5 bg-muted/40 rounded-sm overflow-hidden">
                    <div class="h-full bg-primary rounded-sm" style="width: 70%;"></div>
                  </div>
                  <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$14,200</span>
                </div>
                <div class="flex items-center gap-3">
                  <span class="text-xs text-muted-foreground w-6 text-right shrink-0">Q2</span>
                  <div class="flex-1 h-5 bg-muted/40 rounded-sm overflow-hidden">
                    <div class="h-full bg-primary rounded-sm" style="width: 85%;"></div>
                  </div>
                  <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$17,100</span>
                </div>
                <div class="flex items-center gap-3">
                  <span class="text-xs text-muted-foreground w-6 text-right shrink-0">Q3</span>
                  <div class="flex-1 h-5 bg-muted/40 rounded-sm overflow-hidden">
                    <div class="h-full bg-primary rounded-sm" style="width: 60%;"></div>
                  </div>
                  <span class="text-xs text-muted-foreground w-12 text-right shrink-0">$12,100</span>
                </div>
                <div class="flex items-center gap-3">
                  <span class="text-xs text-muted-foreground w-6 text-right shrink-0">Q4</span>
                  <div class="flex-1 h-5 bg-muted/40 rounded-sm overflow-hidden">
                    <div class="h-full bg-accent rounded-sm" style="width: 45%;"></div>
                  </div>
                  <span class="text-xs text-muted-foreground w-12 text-right shrink-0">in progress</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Code -->
    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70">Horizontal Bar Chart</p>
        <CodeBlock code={horizontalChartCode} lang="html" />
        <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70">Vertical Bar Chart</p>
        <CodeBlock code={verticalChartCode} lang="html" />
        <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70">Chart.js Integration</p>
        <CodeBlock code={chartJsCode} lang="html" />
      </div>
    </section>

    <!-- API Reference -->
    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="overflow-x-auto rounded-lg border border-border">
        <table class="docs-api-table">
          <thead><tr><th>Class</th><th>Description</th></tr></thead>
          <tbody>
            <tr>
              <td><code>bg-primary</code></td>
              <td>Bar fill color using the primary theme color</td>
            </tr>
            <tr>
              <td><code>bg-muted/40</code></td>
              <td>Bar background track color</td>
            </tr>
            <tr>
              <td><code>bg-destructive</code></td>
              <td>Alternative bar fill for negative or warning data</td>
            </tr>
            <tr>
              <td><code>bg-accent</code></td>
              <td>Alternative bar fill for secondary data series</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Guidelines -->
    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Ensure all data values are visible as text labels so screen reader users can access the information</li>
            <li>For complex visualizations, consider adding ARIA labels or a data table alternative</li>
            <li>CSS-only charts are best suited for simple, supplementary visualizations</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Use percentage-based widths (horizontal) or heights (vertical) to create responsive bar visualizations</li>
            <li>Charts automatically inherit Marrow theme colors via <code>bg-primary</code> which uses <code>hsl(var(--marrow-primary))</code></li>
            <li>Use <code>bg-destructive</code>, <code>bg-accent</code>, or custom HSL values for multi-series charts</li>
            <li>For production dashboards requiring interactivity and tooltips, integrate Chart.js, ApexCharts, or D3.js alongside Marrow UI</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
