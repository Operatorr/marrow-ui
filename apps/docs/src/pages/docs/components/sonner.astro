---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";

const triggerCode = `<button class="mw-btn mw-btn-primary"
  @click="$store.toasts.add({
    title: 'Success!',
    description: 'Your changes have been saved.',
    type: 'success'
  })">
  Show Toast
</button>`;

const containerCode = `<!-- Place once in your layout -->
<div x-data class="fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-80"
     style="pointer-events: none;">
  <template x-for="toast in $store.toasts.items" :key="toast.id">
    <div class="mw-card border shadow-lg flex items-start gap-3 p-4"
         style="pointer-events: auto;"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-y-2"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 translate-y-2">
      <div class="flex-1 min-w-0">
        <p class="text-sm font-semibold" x-text="toast.title"></p>
        <p class="text-xs text-muted-foreground mt-0.5"
           x-text="toast.description"></p>
      </div>
      <button @click="$store.toasts.remove(toast.id)"
              class="shrink-0 text-muted-foreground hover:text-foreground">
        &times;
      </button>
    </div>
  </template>
</div>`;

const apiCode = `// Add a toast
$store.toasts.add({
  title: 'Success!',
  description: 'Your changes have been saved.',
  type: 'success',      // 'default' | 'success' | 'error' | 'warning'
  duration: 4000        // ms (0 = persist)
})

// Remove a toast by ID
$store.toasts.remove(toastId)

// Access all active toasts
$store.toasts.items   // Array of toast objects`;
---

<DocsLayout title="Sonner" description="Toast notifications with auto-dismiss and multiple variants" activeComponent="sonner">
  <div class="space-y-8">
    <div>
      <h1 class="font-heading text-3xl font-bold tracking-tight text-pretty">Sonner</h1>
      <p class="mt-2 text-lg text-muted-foreground">Lightweight toast notifications that appear briefly and dismiss automatically, inspired by the Sonner library.</p>
    </div>

    <div class="mw-separator"></div>

    <!-- Preview -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Preview</h2>
      <div class="mw-card">
        <div class="flex flex-wrap gap-2">
          <button class="mw-btn mw-btn-outline"
                  @click={"$store.toasts.add({ title: 'Event created', description: 'Your event has been scheduled successfully.', type: 'default' })"}>
            Default Toast
          </button>
          <button class="mw-btn mw-btn-primary"
                  @click={"$store.toasts.add({ title: 'Success!', description: 'Your changes have been saved.', type: 'success' })"}>
            Success Toast
          </button>
          <button class="mw-btn mw-btn-destructive"
                  @click={"$store.toasts.add({ title: 'Error', description: 'Something went wrong. Please try again.', type: 'error' })"}>
            Error Toast
          </button>
          <button class="mw-btn mw-btn-secondary"
                  @click={"$store.toasts.add({ title: 'Heads up!', description: 'This action cannot be undone.', type: 'warning' })"}>
            Warning Toast
          </button>
        </div>
      </div>

      <!-- Toast Container -->
      <div x-data class="fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-80" style="pointer-events: none;">
        <template x-for="toast in $store.toasts.items" x-bind:key="toast.id">
          <div class="mw-card border shadow-lg flex items-start gap-3 p-4"
               style="pointer-events: auto;"
               x-transition:enter="transition ease-out duration-300"
               x-transition:enter-start="opacity-0 translate-y-2"
               x-transition:enter-end="opacity-100 translate-y-0"
               x-transition:leave="transition ease-in duration-200"
               x-transition:leave-start="opacity-100 translate-y-0"
               x-transition:leave-end="opacity-0 translate-y-2">
            <!-- Icon -->
            <template x-if="toast.type === 'success'">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="hsl(142 71% 45%)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5" aria-hidden="true"><path d="M20 6 9 17l-5-5"/></svg>
            </template>
            <template x-if="toast.type === 'error'">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="hsl(0 84% 60%)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5" aria-hidden="true"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
            </template>
            <template x-if="toast.type === 'warning'">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="hsl(38 92% 50%)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 mt-0.5" aria-hidden="true"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
            </template>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-semibold" x-text="toast.title"></p>
              <p class="text-xs text-muted-foreground mt-0.5" x-text="toast.description"></p>
            </div>
            <button @click="$store.toasts.remove(toast.id)"
                    class="shrink-0 text-muted-foreground hover:text-foreground transition-colors"
                    aria-label="Dismiss notification">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
          </div>
        </template>
      </div>
    </div>

    <!-- Code -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Code</h2>

      <h3 class="font-heading text-lg font-semibold">Trigger a Toast</h3>
      <CodeBlock code={triggerCode} lang="html" />

      <h3 class="font-heading text-lg font-semibold mt-6">Toast Container</h3>
      <CodeBlock code={containerCode} lang="html" />
    </div>

    <!-- Usage -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Usage</h2>

      <div class="space-y-3">
        <p class="text-muted-foreground leading-relaxed">
          Toasts use the Alpine.js global store <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">Alpine.store('toasts')</code>. Call <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">$store.toasts.add()</code> from any component to show a notification.
        </p>

        <p class="text-muted-foreground leading-relaxed">
          Place the toast container once in your page layout. It will render all active toasts as a stacked list in the bottom-right corner. Toasts auto-dismiss after 4 seconds by default.
        </p>
      </div>

      <h3 class="font-heading text-lg font-semibold mt-6">API</h3>
      <CodeBlock code={apiCode} lang="javascript" />

      <div class="mw-table-container">
        <table class="mw-table">
          <thead>
            <tr>
              <th>Property</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>title</code></td>
              <td>string</td>
              <td>Main heading text of the toast</td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td>string</td>
              <td>Optional description text below the title</td>
            </tr>
            <tr>
              <td><code>type</code></td>
              <td>string</td>
              <td>Visual variant: <code>default</code>, <code>success</code>, <code>error</code>, <code>warning</code></td>
            </tr>
            <tr>
              <td><code>duration</code></td>
              <td>number</td>
              <td>Auto-dismiss timeout in milliseconds (default: 4000). Set to 0 to persist until manually dismissed</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3 class="font-heading text-lg font-semibold mt-6">Store Methods</h3>
      <div class="mw-table-container">
        <table class="mw-table">
          <thead>
            <tr>
              <th>Method</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>$store.toasts.add(toast)</code></td>
              <td>Add a new toast notification. Returns the toast ID</td>
            </tr>
            <tr>
              <td><code>$store.toasts.remove(id)</code></td>
              <td>Manually remove a toast by its ID</td>
            </tr>
            <tr>
              <td><code>$store.toasts.items</code></td>
              <td>Array of all currently active toast objects</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3 class="font-heading text-lg font-semibold mt-6">Accessibility</h3>
      <ul class="list-disc list-inside space-y-2 text-muted-foreground">
        <li>Toast container uses <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">pointer-events: none</code> on the wrapper to prevent blocking interactions, with <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">pointer-events: auto</code> on individual toasts</li>
        <li>Dismiss buttons include <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-label="Dismiss notification"</code> for screen readers</li>
        <li>Decorative icons are marked with <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-hidden="true"</code></li>
        <li>For critical alerts, consider using <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">duration: 0</code> to require manual dismissal</li>
        <li>Toast content is announced by screen readers as it appears in the DOM</li>
      </ul>
    </div>
  </div>
</DocsLayout>
