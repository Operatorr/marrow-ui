---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadFull } from "../../../utils/template-loader";

const toggleCode = loadFull("toggle");
---

<DocsLayout title="Toggle" description="A two-state button that can be pressed or unpressed" activeComponent="toggle">
  <div class="space-y-12">

    <!-- Hero -->
    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Buttons & Actions</span>
        <span class="docs-badge-primary docs-badge">Alpine.js</span>
      </div>
      <h1 class="docs-hero-title">Toggle</h1>
      <p class="docs-hero-description mt-3">A two-state button that toggles between pressed and unpressed states. Commonly used for formatting toolbars, settings panels, and any interface where an option can be activated or deactivated.</p>
    </header>

    <!-- Preview -->
    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <!-- Single Toggle -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Single Toggle</p>
          <div x-data="mwToggle()">
            <button class="mw-toggle"
                    :data-state="pressed ? 'on' : 'off'"
                    @click="toggle()"
                    :aria-pressed="pressed"
                    aria-label="Toggle bold">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Formatting Toolbar -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Formatting Toolbar</p>
          <div class="flex items-center gap-1">
            <div x-data="mwToggle()">
              <button class="mw-toggle"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed"
                      aria-label="Toggle bold">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                  <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                </svg>
              </button>
            </div>

            <div x-data="mwToggle()">
              <button class="mw-toggle"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed"
                      aria-label="Toggle italic">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <line x1="19" x2="10" y1="4" y2="4"/>
                  <line x1="14" x2="5" y1="20" y2="20"/>
                  <line x1="15" x2="9" y1="4" y2="20"/>
                </svg>
              </button>
            </div>

            <div x-data="mwToggle()">
              <button class="mw-toggle"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed"
                      aria-label="Toggle underline">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M6 4v6a6 6 0 0 0 12 0V4"/>
                  <line x1="4" x2="20" y1="20" y2="20"/>
                </svg>
              </button>
            </div>

            <div x-data="mwToggle()">
              <button class="mw-toggle"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed"
                      aria-label="Toggle strikethrough">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M16 4H9a3 3 0 0 0-2.83 4"/>
                  <path d="M14 12a4 4 0 0 1 0 8H6"/>
                  <line x1="4" x2="20" y1="12" y2="12"/>
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- With Text Label -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">With Text Label</p>
          <div class="flex flex-wrap gap-2">
            <div x-data="mwToggle()">
              <button class="mw-toggle !aspect-auto px-3 gap-2"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="m12 3-1.9 12.39"/>
                  <path d="M6.6 18.27a9 9 0 1 0 0-12.54"/>
                </svg>
                <span class="text-sm">Text Wrap</span>
              </button>
            </div>

            <div x-data="mwToggle(true)">
              <button class="mw-toggle !aspect-auto px-3 gap-2"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="toggle()"
                      :aria-pressed="pressed">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <rect width="18" height="18" x="3" y="3" rx="2"/>
                  <path d="M7 7h10"/>
                  <path d="M7 12h10"/>
                  <path d="M7 17h10"/>
                </svg>
                <span class="text-sm">Show Lines</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Pressed State Display -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">State Display</p>
          <div x-data="{ pressed: false }">
            <div class="flex items-center gap-4">
              <button class="mw-toggle"
                      :data-state="pressed ? 'on' : 'off'"
                      @click="pressed = !pressed"
                      :aria-pressed="pressed"
                      aria-label="Toggle bold">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                  <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                </svg>
              </button>
              <span class="text-sm text-muted-foreground">
                State: <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono" x-text="pressed ? 'pressed' : 'unpressed'"></code>
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- In Context -->
    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="max-w-lg mx-auto space-y-4">
          <!-- Text Editor Toolbar -->
          <div class="rounded-lg border border-border bg-card overflow-hidden">
            <!-- Toolbar -->
            <div class="flex items-center gap-1 p-2 border-b border-border bg-muted/30">
              <div x-data="mwToggle(true)">
                <button class="mw-toggle"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed"
                        aria-label="Toggle bold">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                    <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/>
                  </svg>
                </button>
              </div>
              <div x-data="mwToggle()">
                <button class="mw-toggle"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed"
                        aria-label="Toggle italic">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <line x1="19" x2="10" y1="4" y2="4"/>
                    <line x1="14" x2="5" y1="20" y2="20"/>
                    <line x1="15" x2="9" y1="4" y2="20"/>
                  </svg>
                </button>
              </div>
              <div x-data="mwToggle()">
                <button class="mw-toggle"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed"
                        aria-label="Toggle underline">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M6 4v6a6 6 0 0 0 12 0V4"/>
                    <line x1="4" x2="20" y1="20" y2="20"/>
                  </svg>
                </button>
              </div>
              <div class="w-px h-6 bg-border mx-1"></div>
              <div x-data="mwToggle()">
                <button class="mw-toggle"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed"
                        aria-label="Toggle strikethrough">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="M16 4H9a3 3 0 0 0-2.83 4"/>
                    <path d="M14 12a4 4 0 0 1 0 8H6"/>
                    <line x1="4" x2="20" y1="12" y2="12"/>
                  </svg>
                </button>
              </div>
              <div x-data="mwToggle()">
                <button class="mw-toggle !aspect-auto px-3 gap-2"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m12 3-1.9 12.39"/>
                    <path d="M6.6 18.27a9 9 0 1 0 0-12.54"/>
                  </svg>
                  <span class="text-sm">Wrap</span>
                </button>
              </div>
            </div>
            <!-- Editor content area -->
            <div class="p-4 min-h-[120px]">
              <p class="text-sm leading-relaxed"><strong>Marrow UI</strong> is a lightweight component library built with Tailwind CSS and Alpine.js. It provides a collection of accessible, themeable components for building modern web interfaces.</p>
              <p class="text-sm leading-relaxed mt-3 text-muted-foreground">Select text and use the toolbar above to apply formatting options.</p>
            </div>
          </div>

          <!-- Settings Panel -->
          <div class="rounded-lg border border-border bg-card p-4 space-y-3">
            <h3 class="font-heading text-sm font-semibold">Editor Settings</h3>
            <div class="flex items-center justify-between">
              <span class="text-sm text-muted-foreground">Word wrap</span>
              <div x-data="mwToggle(true)">
                <button class="mw-toggle !aspect-auto px-3 gap-2"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <path d="m12 3-1.9 12.39"/>
                    <path d="M6.6 18.27a9 9 0 1 0 0-12.54"/>
                  </svg>
                  <span class="text-xs" x-text="pressed ? 'On' : 'Off'"></span>
                </button>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-muted-foreground">Show line numbers</span>
              <div x-data="mwToggle(true)">
                <button class="mw-toggle !aspect-auto px-3 gap-2"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect width="18" height="18" x="3" y="3" rx="2"/>
                    <path d="M7 7h10"/>
                    <path d="M7 12h10"/>
                    <path d="M7 17h10"/>
                  </svg>
                  <span class="text-xs" x-text="pressed ? 'On' : 'Off'"></span>
                </button>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-muted-foreground">Minimap</span>
              <div x-data="mwToggle()">
                <button class="mw-toggle !aspect-auto px-3 gap-2"
                        :data-state="pressed ? 'on' : 'off'"
                        @click="toggle()"
                        :aria-pressed="pressed">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <rect width="7" height="18" x="14" y="3" rx="1"/>
                    <rect width="7" height="7" x="3" y="3" rx="1"/>
                    <rect width="7" height="7" x="3" y="14" rx="1"/>
                  </svg>
                  <span class="text-xs" x-text="pressed ? 'On' : 'Off'"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Code -->
    <section>
      <span class="docs-section-label">Code</span>
      <CodeBlock code={toggleCode} lang="html" />
    </section>

    <!-- API Reference -->
    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="space-y-6">
        <!-- Alpine.js API -->
        <div>
          <h3 class="font-heading text-lg font-semibold mb-3">Alpine.js API</h3>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead>
                <tr>
                  <th>Property / Method</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>mwToggle(initial)</code></td>
                  <td>Function</td>
                  <td>Initialize the toggle component. Pass <code>true</code> to start in the pressed state.</td>
                </tr>
                <tr>
                  <td><code>pressed</code></td>
                  <td>Boolean</td>
                  <td>Reactive property reflecting the current pressed state of the toggle.</td>
                </tr>
                <tr>
                  <td><code>toggle()</code></td>
                  <td>Method</td>
                  <td>Toggles the pressed state between <code>true</code> and <code>false</code>.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- CSS Classes -->
        <div>
          <h3 class="font-heading text-lg font-semibold mb-3">CSS Classes</h3>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead>
                <tr>
                  <th>Class / Selector</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>mw-toggle</code></td>
                  <td>Base toggle button with square aspect ratio and icon sizing</td>
                </tr>
                <tr>
                  <td><code>mw-toggle:hover</code></td>
                  <td>Hover state with muted background</td>
                </tr>
                <tr>
                  <td><code>mw-toggle[data-state="on"]</code></td>
                  <td>Pressed state with accent background and foreground color</td>
                </tr>
                <tr>
                  <td><code>mw-toggle[data-state="off"]</code></td>
                  <td>Unpressed (default) state</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Guidelines -->
    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Always bind <code>:aria-pressed</code> to the <code>pressed</code> property to communicate state to assistive technologies</li>
            <li>For icon-only toggles, add an <code>aria-label</code> attribute to describe the toggle's purpose</li>
            <li>Use <code>:data-state</code> binding to sync visual state (<code>"on"</code> / <code>"off"</code>) with the pressed property</li>
            <li>Add <code>aria-hidden="true"</code> to decorative SVG icons within toggle buttons</li>
            <li>Toggles with text labels do not need <code>aria-label</code> since the visible text serves as the accessible name</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Use toggles for binary options that take effect immediately (e.g., bold on/off)</li>
            <li>Group related toggles together in a toolbar using <code>flex</code> layout with small gaps</li>
            <li>Use <code>!aspect-auto px-3 gap-2</code> to add text labels alongside icons when the icon alone may be ambiguous</li>
            <li>Pass <code>true</code> to <code>mwToggle(true)</code> to set an initial pressed state for defaults</li>
            <li>For mutually exclusive options, consider using a Toggle Group instead of individual toggles</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
