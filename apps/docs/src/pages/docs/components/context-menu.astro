---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";

const contextMenuCode = `<div x-data="mwContextMenu()">
  <!-- Right-click trigger area -->
  <div @contextmenu="show($event)"
    class="flex items-center justify-center h-[200px] border-2 border-dashed border-border rounded-marrow text-sm text-muted-foreground cursor-default">
    Right-click here
  </div>

  <!-- Context Menu -->
  <div x-show="open" x-cloak
    @click.away="close()"
    @keydown.escape.window="close()"
    :style="'position: fixed; left: ' + x + 'px; top: ' + y + 'px; z-index: 50;'"
    class="mw-popover w-56">
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
      Back
      <span class="ml-auto text-xs text-muted-foreground">Alt+←</span>
    </button>
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m15 18-6-6 6-6"/></svg>
      Forward
      <span class="ml-auto text-xs text-muted-foreground">Alt+→</span>
    </button>
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>
      Reload
      <span class="ml-auto text-xs text-muted-foreground">Ctrl+R</span>
    </button>
    <div class="mw-menu-separator"></div>
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
      Save As...
      <span class="ml-auto text-xs text-muted-foreground">Ctrl+S</span>
    </button>
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>
      Print
      <span class="ml-auto text-xs text-muted-foreground">Ctrl+P</span>
    </button>
    <div class="mw-menu-separator"></div>
    <button @click="close()" class="mw-menu-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
      View Source
      <span class="ml-auto text-xs text-muted-foreground">Ctrl+U</span>
    </button>
  </div>
</div>`;
---

<DocsLayout title="Context Menu" description="A menu that appears on right-click, providing contextual actions for an element" activeComponent="context-menu">
  <div class="space-y-8">
    <div>
      <h1 class="font-heading text-3xl font-bold tracking-tight text-pretty">Context Menu</h1>
      <p class="mt-2 text-muted-foreground leading-relaxed">A menu that appears on right-click, providing contextual actions for an element.</p>
    </div>

    <div class="mw-separator"></div>

    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight text-pretty">Preview</h2>
      <div class="mw-card" x-data="mwContextMenu()">
        <div @contextmenu="show($event)"
          class="flex items-center justify-center h-[200px] border-2 border-dashed border-border rounded-marrow text-sm text-muted-foreground cursor-default select-none">
          Right-click here
        </div>

        <!-- Context Menu -->
        <div x-show="open" x-cloak
          @click.away="close()"
          @keydown.escape.window="close()"
          :style="'position: fixed; left: ' + x + 'px; top: ' + y + 'px; z-index: 50;'"
          x-transition:enter="transition ease-out duration-100"
          x-transition:enter-start="opacity-0 scale-95"
          x-transition:enter-end="opacity-100 scale-100"
          x-transition:leave="transition ease-in duration-75"
          x-transition:leave-start="opacity-100 scale-100"
          x-transition:leave-end="opacity-0 scale-95"
          class="mw-popover w-56">
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
            Back
            <span class="ml-auto text-xs text-muted-foreground">Alt+←</span>
          </button>
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m15 18-6-6 6-6"/></svg>
            Forward
            <span class="ml-auto text-xs text-muted-foreground">Alt+→</span>
          </button>
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>
            Reload
            <span class="ml-auto text-xs text-muted-foreground">Ctrl+R</span>
          </button>
          <div class="mw-menu-separator"></div>
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
            Save As...
            <span class="ml-auto text-xs text-muted-foreground">Ctrl+S</span>
          </button>
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>
            Print
            <span class="ml-auto text-xs text-muted-foreground">Ctrl+P</span>
          </button>
          <div class="mw-menu-separator"></div>
          <button @click="close()" class="mw-menu-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
            View Source
            <span class="ml-auto text-xs text-muted-foreground">Ctrl+U</span>
          </button>
        </div>
      </div>
    </div>

    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight text-pretty">Code</h2>
      <CodeBlock code={contextMenuCode} lang="html" />
    </div>

    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight text-pretty">Usage</h2>

      <div class="space-y-4">
        <div>
          <h3 class="font-heading text-lg font-semibold">Alpine.js API</h3>
          <p class="mt-2 text-muted-foreground leading-relaxed">
            The <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mwContextMenu()</code> function provides the following reactive properties and methods:
          </p>
          <div class="mt-4 overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-border">
                  <th class="px-4 py-2 text-left font-semibold">Property/Method</th>
                  <th class="px-4 py-2 text-left font-semibold">Type</th>
                  <th class="px-4 py-2 text-left font-semibold">Description</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-border">
                <tr>
                  <td class="px-4 py-2 font-mono text-xs">open</td>
                  <td class="px-4 py-2 text-muted-foreground">Boolean</td>
                  <td class="px-4 py-2 text-muted-foreground">Controls menu visibility</td>
                </tr>
                <tr>
                  <td class="px-4 py-2 font-mono text-xs">x</td>
                  <td class="px-4 py-2 text-muted-foreground">Number</td>
                  <td class="px-4 py-2 text-muted-foreground">Horizontal position in pixels</td>
                </tr>
                <tr>
                  <td class="px-4 py-2 font-mono text-xs">y</td>
                  <td class="px-4 py-2 text-muted-foreground">Number</td>
                  <td class="px-4 py-2 text-muted-foreground">Vertical position in pixels</td>
                </tr>
                <tr>
                  <td class="px-4 py-2 font-mono text-xs">show(e)</td>
                  <td class="px-4 py-2 text-muted-foreground">Function</td>
                  <td class="px-4 py-2 text-muted-foreground">Opens menu at cursor position (calls e.preventDefault())</td>
                </tr>
                <tr>
                  <td class="px-4 py-2 font-mono text-xs">close()</td>
                  <td class="px-4 py-2 text-muted-foreground">Function</td>
                  <td class="px-4 py-2 text-muted-foreground">Closes the context menu</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div>
          <h3 class="font-heading text-lg font-semibold">CSS Classes</h3>
          <p class="mt-2 text-muted-foreground leading-relaxed">Context menus use the following Marrow UI classes:</p>
          <ul class="mt-3 space-y-2 text-muted-foreground">
            <li><code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mw-popover</code> — Container for the context menu</li>
            <li><code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mw-menu-item</code> — Interactive menu items</li>
            <li><code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mw-menu-separator</code> — Visual divider between menu groups</li>
            <li><code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mw-menu-label</code> — Non-interactive section labels</li>
          </ul>
        </div>

        <div>
          <h3 class="font-heading text-lg font-semibold">Accessibility</h3>
          <ul class="mt-2 space-y-2 text-muted-foreground leading-relaxed">
            <li>Menu closes on <kbd class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">Escape</kbd> key press</li>
            <li>Menu closes when clicking outside the menu area</li>
            <li>Use semantic <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">&lt;button&gt;</code> elements for all interactive menu items</li>
            <li>Add <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-hidden="true"</code> to decorative icons within menu items</li>
            <li>Consider adding visual feedback for keyboard navigation if implementing arrow key support</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</DocsLayout>
