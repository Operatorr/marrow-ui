---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";

const calendarCode = `<div x-data="mwCalendar()" class="mw-card w-[280px] p-3">
  <!-- Month Navigation -->
  <div class="flex items-center justify-between mb-4">
    <button @click="prevMonth()"
            class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
            aria-label="Previous month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
           viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
           aria-hidden="true">
        <path d="m15 18-6-6 6-6"/>
      </svg>
    </button>
    <span class="text-sm font-medium"
          x-text="monthName + ' ' + currentYear"
          role="heading"
          aria-level="2"
          aria-live="polite"></span>
    <button @click="nextMonth()"
            class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
            aria-label="Next month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
           viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
           aria-hidden="true">
        <path d="m9 18 6-6-6-6"/>
      </svg>
    </button>
  </div>

  <!-- Day of week headers -->
  <div class="grid grid-cols-7 mb-1" role="row">
    <template x-for="day in ['Su','Mo','Tu','We','Th','Fr','Sa']" :key="day">
      <div class="text-center text-xs font-medium text-muted-foreground py-1"
           x-text="day"
           role="columnheader"></div>
    </template>
  </div>

  <!-- Day grid -->
  <div class="grid grid-cols-7" role="grid" aria-label="Calendar days">
    <template x-for="(day, index) in days" :key="index">
      <button
        @click="selectDate(day)"
        :disabled="!day"
        :aria-label="day ? 'Select ' + monthName + ' ' + day + ', ' + currentYear : ''"
        :aria-pressed="isSelected(day)"
        :class="{
          'bg-primary text-primary-foreground hover:bg-primary/90': isSelected(day),
          'bg-accent': isToday(day) && !isSelected(day),
          'hover:bg-accent': day && !isSelected(day),
          'opacity-0 pointer-events-none': !day
        }"
        class="h-8 w-8 mx-auto rounded-[var(--marrow-radius)] text-sm
               flex items-center justify-center
               transition-[background-color,color,opacity]"
        role="gridcell"
        x-text="day || ''">
      </button>
    </template>
  </div>

  <!-- Selected date display -->
  <div class="mt-4 pt-4 border-t border-border text-sm text-center"
       x-show="selected"
       x-transition:enter="transition-[opacity,transform] duration-200"
       x-transition:enter-start="opacity-0 translate-y-[-8px]"
       x-transition:enter-end="opacity-100 translate-y-0">
    <span class="text-muted-foreground">Selected: </span>
    <span class="font-medium"
          x-text="selected ? selected.toLocaleDateString('en-US', {
            weekday: 'short',
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          }) : ''"></span>
  </div>
</div>`;
---

<DocsLayout title="Calendar" description="An inline date calendar for selecting dates" activeComponent="calendar">
  <div class="space-y-8">
    <div>
      <h1 class="font-heading text-3xl font-bold tracking-tight text-pretty">Calendar</h1>
      <p class="mt-2 text-muted-foreground leading-relaxed">An inline date calendar for selecting dates with month navigation and keyboard support.</p>
    </div>
    <div class="mw-separator"></div>

    <!-- Preview -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Preview</h2>
      <div class="mw-card flex items-center justify-center min-h-[420px]">
        <div x-data="mwCalendar()" class="mw-card w-[280px] p-3">
          <!-- Month Navigation -->
          <div class="flex items-center justify-between mb-4">
            <button @click="prevMonth()"
                    class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
                    aria-label="Previous month">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m15 18-6-6 6-6"/></svg>
            </button>
            <span class="text-sm font-medium"
                  x-text="monthName + ' ' + currentYear"
                  role="heading"
                  aria-level="2"
                  aria-live="polite"></span>
            <button @click="nextMonth()"
                    class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
                    aria-label="Next month">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
            </button>
          </div>

          <!-- Day headers -->
          <div class="grid grid-cols-7 mb-1" role="row">
            <template x-for="day in ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']" x-bind:key="day">
              <div class="text-center text-xs font-medium text-muted-foreground py-1" x-text="day" role="columnheader"></div>
            </template>
          </div>

          <!-- Day grid -->
          <div class="grid grid-cols-7" role="grid" aria-label="Calendar days">
            <template x-for="(day, index) in days" x-bind:key="index">
              <button
                @click="selectDate(day)"
                :disabled="!day"
                :aria-label="day ? 'Select ' + monthName + ' ' + day + ', ' + currentYear : ''"
                :aria-pressed="isSelected(day)"
                :class="{
                  'bg-primary text-primary-foreground hover:bg-primary/90': isSelected(day),
                  'bg-accent': isToday(day) && !isSelected(day),
                  'hover:bg-accent': day && !isSelected(day),
                  'opacity-0 pointer-events-none': !day
                }"
                class="h-8 w-8 mx-auto rounded-[var(--marrow-radius)] text-sm flex items-center justify-center transition-[background-color,color,opacity]"
                role="gridcell"
                x-text="day || ''">
              </button>
            </template>
          </div>

          <!-- Selected date display -->
          <div class="mt-4 pt-4 border-t border-border text-sm text-center"
               x-show="selected"
               x-transition:enter="transition-[opacity,transform] duration-200"
               x-transition:enter-start="opacity-0 translate-y-[-8px]"
               x-transition:enter-end="opacity-100 translate-y-0">
            <span class="text-muted-foreground">Selected: </span>
            <span class="font-medium"
                  x-text="selected ? selected.toLocaleDateString('en-US', {
                    weekday: 'short',
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                  }) : ''"></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Code -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Code</h2>
      <CodeBlock code={calendarCode} lang="html" />
    </div>

    <!-- Usage -->
    <div class="space-y-4">
      <h2 class="font-heading text-2xl font-semibold tracking-tight">Usage</h2>
      <div class="space-y-4">
        <div>
          <h3 class="font-heading text-lg font-semibold mb-2">Alpine.js API</h3>
          <p class="text-muted-foreground leading-relaxed mb-4">
            The calendar component uses <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">mwCalendar()</code> from <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">marrow.js</code> for state management and date selection.
          </p>
          <div class="mw-card overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-border">
                  <th class="text-left py-3 px-4 font-semibold">Property/Method</th>
                  <th class="text-left py-3 px-4 font-semibold">Type</th>
                  <th class="text-left py-3 px-4 font-semibold">Description</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-border">
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">selected</td>
                  <td class="py-3 px-4 text-muted-foreground">Date | null</td>
                  <td class="py-3 px-4 text-muted-foreground">Currently selected date</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">currentMonth</td>
                  <td class="py-3 px-4 text-muted-foreground">Number</td>
                  <td class="py-3 px-4 text-muted-foreground">Current displayed month (0-11)</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">currentYear</td>
                  <td class="py-3 px-4 text-muted-foreground">Number</td>
                  <td class="py-3 px-4 text-muted-foreground">Current displayed year</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">monthName</td>
                  <td class="py-3 px-4 text-muted-foreground">String (getter)</td>
                  <td class="py-3 px-4 text-muted-foreground">Formatted month name (e.g., "January")</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">daysInMonth</td>
                  <td class="py-3 px-4 text-muted-foreground">Number (getter)</td>
                  <td class="py-3 px-4 text-muted-foreground">Number of days in current month</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">firstDayOfWeek</td>
                  <td class="py-3 px-4 text-muted-foreground">Number (getter)</td>
                  <td class="py-3 px-4 text-muted-foreground">Starting day offset (0-6)</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">days</td>
                  <td class="py-3 px-4 text-muted-foreground">Array (getter)</td>
                  <td class="py-3 px-4 text-muted-foreground">Array of day numbers with null padding for grid layout</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">selectDate(day)</td>
                  <td class="py-3 px-4 text-muted-foreground">Function</td>
                  <td class="py-3 px-4 text-muted-foreground">Select a specific date in the current month</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">isSelected(day)</td>
                  <td class="py-3 px-4 text-muted-foreground">Function</td>
                  <td class="py-3 px-4 text-muted-foreground">Check if a day is currently selected</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">isToday(day)</td>
                  <td class="py-3 px-4 text-muted-foreground">Function</td>
                  <td class="py-3 px-4 text-muted-foreground">Check if a day is today's date</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">prevMonth()</td>
                  <td class="py-3 px-4 text-muted-foreground">Function</td>
                  <td class="py-3 px-4 text-muted-foreground">Navigate to the previous month</td>
                </tr>
                <tr>
                  <td class="py-3 px-4 font-mono text-xs">nextMonth()</td>
                  <td class="py-3 px-4 text-muted-foreground">Function</td>
                  <td class="py-3 px-4 text-muted-foreground">Navigate to the next month</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div>
          <h3 class="font-heading text-lg font-semibold mb-2">Accessibility</h3>
          <ul class="space-y-2 text-muted-foreground leading-relaxed">
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Navigation buttons include <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-label</code> for screen readers</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Month/year display uses <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-live="polite"</code> for announcements</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Day buttons include descriptive <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-label</code> with full date</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Selected state indicated with <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">aria-pressed</code> attribute</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Grid structure uses <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">role="grid"</code> and <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">role="gridcell"</code> for semantic markup</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Today's date is visually highlighted with accent background</span>
            </li>
            <li class="flex gap-2">
              <span class="text-primary mt-1">•</span>
              <span>Transitions respect <code class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono">prefers-reduced-motion</code> preference</span>
            </li>
          </ul>
        </div>

        <div>
          <h3 class="font-heading text-lg font-semibold mb-2">Styling</h3>
          <p class="text-muted-foreground leading-relaxed">
            The calendar adapts to your theme configuration including border radius, colors, and transitions. Selected dates use the primary color scheme, while today's date uses the accent color. Empty grid cells are hidden with opacity for clean month boundaries.
          </p>
        </div>
      </div>
    </div>
  </div>
</DocsLayout>
