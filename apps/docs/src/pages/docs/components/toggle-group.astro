---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadTemplate } from "../../../utils/template-loader";

const t = loadTemplate("toggle-group");
const singleCode = t.sections.get("Single")!;
const multipleCode = t.sections.get("Multiple")!;
---

<DocsLayout title="Toggle Group" description="A group of toggle buttons where one or multiple can be selected" activeComponent="toggle-group">
  <div class="space-y-12">

    <!-- Hero -->
    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Buttons & Actions</span>
        <span class="docs-badge-primary docs-badge">Alpine.js</span>
      </div>
      <h1 class="docs-hero-title">Toggle Group</h1>
      <p class="docs-hero-description mt-3">A group of toggle buttons that supports single or multiple selection. Commonly used for text alignment, formatting toolbars, and view mode switchers.</p>
    </header>

    <!-- Preview -->
    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <!-- Single Selection -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Single Selection</p>
          <div x-data="mwToggleGroup('single', 'center')" class="space-y-3">
            <div role="group" aria-label="Text alignment" class="inline-flex gap-1 bg-muted rounded-[var(--marrow-radius)] p-1">
              <button class="mw-toggle"
                      :data-state="isSelected('left') ? 'on' : 'off'"
                      @click="select('left')"
                      aria-label="Align Left">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="21" x2="3" y1="6" y2="6"/><line x1="15" x2="3" y1="12" y2="12"/><line x1="17" x2="3" y1="18" y2="18"/></svg>
              </button>
              <button class="mw-toggle"
                      :data-state="isSelected('center') ? 'on' : 'off'"
                      @click="select('center')"
                      aria-label="Align Center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="21" x2="3" y1="6" y2="6"/><line x1="17" x2="7" y1="12" y2="12"/><line x1="19" x2="5" y1="18" y2="18"/></svg>
              </button>
              <button class="mw-toggle"
                      :data-state="isSelected('right') ? 'on' : 'off'"
                      @click="select('right')"
                      aria-label="Align Right">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="21" x2="3" y1="6" y2="6"/><line x1="21" x2="9" y1="12" y2="12"/><line x1="21" x2="7" y1="18" y2="18"/></svg>
              </button>
              <button class="mw-toggle"
                      :data-state="isSelected('justify') ? 'on' : 'off'"
                      @click="select('justify')"
                      aria-label="Justify">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="3" x2="21" y1="6" y2="6"/><line x1="3" x2="21" y1="12" y2="12"/><line x1="3" x2="21" y1="18" y2="18"/></svg>
              </button>
            </div>
            <p class="text-sm text-muted-foreground">
              Selected: <span class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono" x-text="value || 'none'"></span>
            </p>
          </div>
        </div>

        <!-- Multiple Selection -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Multiple Selection</p>
          <div x-data="mwToggleGroup('multiple', ['bold'])" class="space-y-3">
            <div role="group" aria-label="Text formatting" class="inline-flex gap-1 bg-muted rounded-[var(--marrow-radius)] p-1">
              <button class="mw-toggle"
                      :data-state="isSelected('bold') ? 'on' : 'off'"
                      @click="select('bold')"
                      aria-label="Bold">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/></svg>
              </button>
              <button class="mw-toggle"
                      :data-state="isSelected('italic') ? 'on' : 'off'"
                      @click="select('italic')"
                      aria-label="Italic">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="19" x2="10" y1="4" y2="4"/><line x1="14" x2="5" y1="20" y2="20"/><line x1="15" x2="9" y1="4" y2="20"/></svg>
              </button>
              <button class="mw-toggle"
                      :data-state="isSelected('underline') ? 'on' : 'off'"
                      @click="select('underline')"
                      aria-label="Underline">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 4v6a6 6 0 0 0 12 0V4"/><line x1="4" x2="20" y1="20" y2="20"/></svg>
              </button>
            </div>
            <p class="text-sm text-muted-foreground">
              Selected: <span class="px-1.5 py-0.5 bg-muted rounded text-sm font-mono" x-text="value.length > 0 ? value.join(', ') : 'none'"></span>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- In Context -->
    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="max-w-lg mx-auto space-y-4">
          <!-- Document editor toolbar -->
          <div class="rounded-lg border border-border bg-card overflow-hidden">
            <!-- Toolbar -->
            <div class="border-b border-border bg-muted/30 px-4 py-2 flex items-center gap-4">
              <!-- View mode switcher -->
              <div x-data="mwToggleGroup('single', 'edit')">
                <div role="group" aria-label="Editor view mode" class="inline-flex gap-1 bg-muted rounded-[var(--marrow-radius)] p-1">
                  <button class="mw-toggle"
                          :data-state="isSelected('edit') ? 'on' : 'off'"
                          @click="select('edit')"
                          aria-label="Edit mode">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
                  </button>
                  <button class="mw-toggle"
                          :data-state="isSelected('preview') ? 'on' : 'off'"
                          @click="select('preview')"
                          aria-label="Preview mode">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                  </button>
                  <button class="mw-toggle"
                          :data-state="isSelected('split') ? 'on' : 'off'"
                          @click="select('split')"
                          aria-label="Split view">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"/><line x1="12" x2="12" y1="3" y2="21"/></svg>
                  </button>
                </div>
              </div>

              <div class="h-5 w-px bg-border" aria-hidden="true"></div>

              <!-- Text formatting -->
              <div x-data="mwToggleGroup('multiple', ['bold'])">
                <div role="group" aria-label="Text formatting" class="inline-flex gap-1 bg-muted rounded-[var(--marrow-radius)] p-1">
                  <button class="mw-toggle"
                          :data-state="isSelected('bold') ? 'on' : 'off'"
                          @click="select('bold')"
                          aria-label="Bold">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/></svg>
                  </button>
                  <button class="mw-toggle"
                          :data-state="isSelected('italic') ? 'on' : 'off'"
                          @click="select('italic')"
                          aria-label="Italic">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="19" x2="10" y1="4" y2="4"/><line x1="14" x2="5" y1="20" y2="20"/><line x1="15" x2="9" y1="4" y2="20"/></svg>
                  </button>
                  <button class="mw-toggle"
                          :data-state="isSelected('underline') ? 'on' : 'off'"
                          @click="select('underline')"
                          aria-label="Underline">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M6 4v6a6 6 0 0 0 12 0V4"/><line x1="4" x2="20" y1="20" y2="20"/></svg>
                  </button>
                </div>
              </div>
            </div>
            <!-- Document body -->
            <div class="p-5 min-h-[120px]">
              <p class="text-sm font-semibold mb-2">Project Overview</p>
              <p class="text-sm text-muted-foreground leading-relaxed">This document outlines the key objectives and deliverables for the upcoming quarter. All team members should review the timeline and raise any concerns during the next standup.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Code -->
    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={singleCode} lang="html" />
        <CodeBlock code={multipleCode} lang="html" />
      </div>
    </section>

    <!-- API Reference -->
    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="space-y-6">

        <!-- Parameters -->
        <div>
          <h3 class="font-heading text-lg font-semibold mb-3">Parameters</h3>
          <p class="text-sm text-muted-foreground mb-4">Initialize with <code>x-data="mwToggleGroup(type, initial)"</code></p>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Default</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>type</code></td>
                  <td>String</td>
                  <td><code>'single'</code></td>
                  <td>Selection mode -- <code>'single'</code> or <code>'multiple'</code></td>
                </tr>
                <tr>
                  <td><code>initial</code></td>
                  <td>String | Array</td>
                  <td><code>null</code></td>
                  <td>Initial selected value(s). Use a string for single mode, an array for multiple mode.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Methods & Properties -->
        <div>
          <h3 class="font-heading text-lg font-semibold mb-3">Methods & Properties</h3>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>value</code></td>
                  <td>String | Array</td>
                  <td>Current selected value(s). A string in single mode, an array in multiple mode.</td>
                </tr>
                <tr>
                  <td><code>select(val)</code></td>
                  <td>Method</td>
                  <td>Toggle a value on or off. In single mode, selecting the active value deselects it.</td>
                </tr>
                <tr>
                  <td><code>isSelected(val)</code></td>
                  <td>Method</td>
                  <td>Returns <code>true</code> if the given value is currently selected.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- CSS Classes -->
        <div>
          <h3 class="font-heading text-lg font-semibold mb-3">CSS Classes</h3>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead>
                <tr>
                  <th>Class</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>mw-toggle</code></td>
                  <td>Individual toggle button within a group. Square aspect ratio with icon sizing.</td>
                </tr>
                <tr>
                  <td><code>mw-toggle:hover</code></td>
                  <td>Hover state with muted background.</td>
                </tr>
                <tr>
                  <td><code>mw-toggle[data-state="on"]</code></td>
                  <td>Active/pressed state with accent background and foreground color.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- Guidelines -->
    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Add <code>role="group"</code> to the container element wrapping the toggle buttons</li>
            <li>Add <code>aria-label</code> to the group to describe its purpose (e.g., "Text alignment")</li>
            <li>Add <code>aria-label</code> to each icon-only button to describe its action</li>
            <li>Use <code>:data-state</code> binding to toggle between <code>"on"</code> and <code>"off"</code> for visual and semantic state</li>
            <li>Buttons are keyboard navigable with Tab and activatable with Space/Enter</li>
            <li>Add <code>aria-hidden="true"</code> to decorative SVG icons inside buttons</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Use <code>'single'</code> mode when only one option should be active at a time (e.g., text alignment, view modes)</li>
            <li>Use <code>'multiple'</code> mode when several options can be active simultaneously (e.g., text formatting)</li>
            <li>Wrap the group in a container with <code>bg-muted</code> and <code>p-1</code> to create a pill-shaped toolbar appearance</li>
            <li>Provide visual feedback by displaying the current <code>value</code> when useful for debugging or user confirmation</li>
            <li>Keep toggle groups to 2-5 options -- use a different component (e.g., Select) for longer lists</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
