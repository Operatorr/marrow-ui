<!-- Marrow UI: Calendar -->
<!-- An inline date calendar for selecting dates -->
<!-- Requires: Tailwind CSS, Alpine.js, marrow.css, marrow.js -->

<div x-data="mwCalendar()" class="mw-card w-[280px] p-3">
  <!-- Month Navigation -->
  <div class="flex items-center justify-between mb-4">
    <button @click="prevMonth()"
            class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
            aria-label="Previous month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
           viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
           aria-hidden="true">
        <path d="m15 18-6-6 6-6"/>
      </svg>
    </button>
    <span class="text-sm font-medium"
          x-text="monthName + ' ' + currentYear"
          role="heading"
          aria-level="2"
          aria-live="polite"></span>
    <button @click="nextMonth()"
            class="mw-btn mw-btn-ghost mw-btn-icon mw-btn-sm"
            aria-label="Next month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
           viewBox="0 0 24 24" fill="none" stroke="currentColor"
           stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
           aria-hidden="true">
        <path d="m9 18 6-6-6-6"/>
      </svg>
    </button>
  </div>

  <!-- Day of week headers -->
  <div class="grid grid-cols-7 mb-1" role="row">
    <template x-for="day in ['Su','Mo','Tu','We','Th','Fr','Sa']" :key="day">
      <div class="text-center text-xs font-medium text-muted-foreground py-1"
           x-text="day"
           role="columnheader"></div>
    </template>
  </div>

  <!-- Day grid -->
  <div class="grid grid-cols-7" role="grid" aria-label="Calendar days">
    <template x-for="(day, index) in days" :key="index">
      <button
        @click="selectDate(day)"
        :disabled="!day"
        :aria-label="day ? 'Select ' + monthName + ' ' + day + ', ' + currentYear : ''"
        :aria-pressed="isSelected(day)"
        :class="{
          'bg-primary text-primary-foreground hover:bg-primary/90': isSelected(day),
          'bg-accent': isToday(day) && !isSelected(day),
          'hover:bg-accent': day && !isSelected(day),
          'opacity-0 pointer-events-none': !day
        }"
        class="h-8 w-8 mx-auto rounded-[var(--marrow-radius)] text-sm
               flex items-center justify-center
               transition-[background-color,color,opacity]"
        role="gridcell"
        x-text="day || ''">
      </button>
    </template>
  </div>

  <!-- Selected date display -->
  <div class="mt-4 pt-4 border-t border-border text-sm text-center"
       x-show="selected"
       x-transition:enter="transition-[opacity,transform] duration-200"
       x-transition:enter-start="opacity-0 translate-y-[-8px]"
       x-transition:enter-end="opacity-100 translate-y-0">
    <span class="text-muted-foreground">Selected: </span>
    <span class="font-medium"
          x-text="selected ? selected.toLocaleDateString('en-US', {
            weekday: 'short',
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          }) : ''"></span>
  </div>
</div>
