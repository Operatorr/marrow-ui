---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadFull } from "../../../utils/template-loader";

const paginationCode = loadFull("pagination");
---

<DocsLayout title="Pagination" description="Pagination component with page numbers, previous and next buttons" activeComponent="pagination">
  <div class="space-y-12">

    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Navigation</span>
        <span class="docs-badge-primary docs-badge">Pure CSS</span>
      </div>
      <h1 class="docs-hero-title">Pagination</h1>
      <p class="docs-hero-description mt-3">A pagination component with page numbers, previous and next buttons. Uses Alpine.js to manage the current page state and visible page window.</p>
    </header>

    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage">
        <div x-data="mwPagination(10)" class="flex flex-col items-center gap-4">
          <p class="text-sm text-muted-foreground">
            Page <span x-text="current" class="font-medium text-foreground"></span>
            of <span x-text="totalPages"></span>
          </p>

          <div class="mw-pagination">
            <!-- Previous button -->
            <button @click="prev()" :disabled="current === 1"
                    class="mw-pagination-item"
                    aria-label="Previous page">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                   viewBox="0 0 24 24" fill="none" stroke="currentColor"
                   stroke-width="2" stroke-linecap="round"
                   stroke-linejoin="round" aria-hidden="true">
                <path d="m15 18-6-6 6-6"/>
              </svg>
            </button>

            <!-- Page numbers -->
            <template x-for="page in pages" x-bind:key="page">
              <button @click="goTo(page)"
                      :data-active="current === page ? '' : undefined"
                      :aria-current="current === page ? 'page' : undefined"
                      class="mw-pagination-item"
                      x-text="page">
              </button>
            </template>

            <!-- Next button -->
            <button @click="next()" :disabled="current === totalPages"
                    class="mw-pagination-item"
                    aria-label="Next page">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                   viewBox="0 0 24 24" fill="none" stroke="currentColor"
                   stroke-width="2" stroke-linecap="round"
                   stroke-linejoin="round" aria-hidden="true">
                <path d="m9 18 6-6-6-6"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="rounded-lg border border-border overflow-hidden">
          <!-- Table header -->
          <div class="flex items-center justify-between px-4 py-3 border-b border-border bg-muted/30">
            <h4 class="text-sm font-semibold">Recent Orders</h4>
            <span class="text-xs text-muted-foreground">Showing 1-5 of 48 results</span>
          </div>
          <!-- Table rows -->
          <div class="divide-y divide-border text-sm">
            <div class="flex items-center px-4 py-3 gap-4">
              <span class="font-mono text-xs text-muted-foreground w-20">#ORD-001</span>
              <span class="flex-1">Wireless Headphones</span>
              <span class="text-muted-foreground">$79.99</span>
              <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500">Delivered</span>
            </div>
            <div class="flex items-center px-4 py-3 gap-4">
              <span class="font-mono text-xs text-muted-foreground w-20">#ORD-002</span>
              <span class="flex-1">USB-C Hub</span>
              <span class="text-muted-foreground">$34.99</span>
              <span class="text-xs px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-500">Shipped</span>
            </div>
            <div class="flex items-center px-4 py-3 gap-4">
              <span class="font-mono text-xs text-muted-foreground w-20">#ORD-003</span>
              <span class="flex-1">Mechanical Keyboard</span>
              <span class="text-muted-foreground">$149.00</span>
              <span class="text-xs px-2 py-0.5 rounded-full bg-amber-500/10 text-amber-500">Processing</span>
            </div>
            <div class="flex items-center px-4 py-3 gap-4">
              <span class="font-mono text-xs text-muted-foreground w-20">#ORD-004</span>
              <span class="flex-1">Monitor Stand</span>
              <span class="text-muted-foreground">$59.99</span>
              <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500">Delivered</span>
            </div>
            <div class="flex items-center px-4 py-3 gap-4">
              <span class="font-mono text-xs text-muted-foreground w-20">#ORD-005</span>
              <span class="flex-1">Webcam HD</span>
              <span class="text-muted-foreground">$89.00</span>
              <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-500">Delivered</span>
            </div>
          </div>
          <!-- Pagination footer -->
          <div class="flex items-center justify-center px-4 py-3 border-t border-border bg-muted/30">
            <div x-data="mwPagination(10)" class="flex items-center gap-2">
              <button @click="prev()" :disabled="current === 1" class="mw-pagination-item" aria-label="Previous page">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m15 18-6-6 6-6"/></svg>
              </button>
              <template x-for="page in pages" x-bind:key="page">
                <button @click="goTo(page)" :data-active="current === page ? '' : undefined" :aria-current="current === page ? 'page' : undefined" class="mw-pagination-item" x-text="page"></button>
              </template>
              <button @click="next()" :disabled="current === totalPages" class="mw-pagination-item" aria-label="Next page">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={paginationCode} lang="html" />
      </div>
    </section>

    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="space-y-6">
        <!-- Alpine.js API -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Alpine.js API</p>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead><tr><th>Property / Method</th><th>Type</th><th>Description</th></tr></thead>
              <tbody>
                <tr>
                  <td><code>current</code></td>
                  <td>Number</td>
                  <td>The currently active page number</td>
                </tr>
                <tr>
                  <td><code>totalPages</code></td>
                  <td>Number</td>
                  <td>Total number of pages</td>
                </tr>
                <tr>
                  <td><code>pages</code></td>
                  <td>Array</td>
                  <td>Computed window of visible page numbers (max 5)</td>
                </tr>
                <tr>
                  <td><code>goTo(page)</code></td>
                  <td>Method</td>
                  <td>Navigate to a specific page (clamped to valid range)</td>
                </tr>
                <tr>
                  <td><code>prev()</code></td>
                  <td>Method</td>
                  <td>Go to the previous page</td>
                </tr>
                <tr>
                  <td><code>next()</code></td>
                  <td>Method</td>
                  <td>Go to the next page</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- CSS Classes -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">CSS Classes</p>
          <div class="overflow-x-auto rounded-lg border border-border">
            <table class="docs-api-table">
              <thead><tr><th>Class</th><th>Description</th></tr></thead>
              <tbody>
                <tr>
                  <td><code>mw-pagination</code></td>
                  <td>Flex container with gap spacing for pagination items</td>
                </tr>
                <tr>
                  <td><code>mw-pagination-item</code></td>
                  <td>Page button (2.25rem square, border, rounded corners)</td>
                </tr>
                <tr>
                  <td><code>mw-pagination-item:hover</code></td>
                  <td>Hover state with accent background</td>
                </tr>
                <tr>
                  <td><code>mw-pagination-item[data-active]</code></td>
                  <td>Active page state with primary background and foreground</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Use <code>aria-label</code> on previous/next buttons for screen readers</li>
            <li>Add <code>aria-current="page"</code> to the active page button</li>
            <li>Add <code>aria-hidden="true"</code> to decorative SVG icons</li>
            <li>Disable previous/next buttons at boundaries using the <code>:disabled</code> attribute</li>
            <li>Ensure sufficient color contrast between active and inactive page buttons</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Show a limited window of page numbers to keep the UI compact</li>
            <li>Display current page and total pages for context</li>
            <li>Consider providing a "Skip to page" input for very long pagination lists</li>
            <li>Position pagination consistently at the bottom of the content it controls</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
