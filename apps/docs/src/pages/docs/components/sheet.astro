---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadFull } from "../../../utils/template-loader";

const sheetCode = loadFull("sheet");
---

<DocsLayout title="Sheet" description="A side panel that slides in from the edge of the screen" activeComponent="sheet">
  <div class="space-y-12">

    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Overlays</span>
        <span class="docs-badge-primary docs-badge">Alpine.js</span>
      </div>
      <h1 class="docs-hero-title">Sheet</h1>
      <p class="docs-hero-description mt-3">A panel that slides in from the edge of the viewport, useful for navigation, forms, or supplementary content.</p>
    </header>

    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage">
        <div x-data="mwSheet()">
          <button @click="show()" class="mw-btn mw-btn-outline">Open Sheet</button>

          <template x-teleport="body">
            <div x-show="open" class="fixed inset-0 z-50" x-cloak>
              <div class="mw-overlay" @click="close()"
                   x-transition:enter="transition ease-out duration-300"
                   x-transition:enter-start="opacity-0"
                   x-transition:enter-end="opacity-100"
                   x-transition:leave="transition ease-in duration-200"
                   x-transition:leave-start="opacity-100"
                   x-transition:leave-end="opacity-0"></div>

              <div class="mw-sheet mw-sheet-right"
                   x-transition:enter="transition ease-out duration-300"
                   x-transition:enter-start="translate-x-full"
                   x-transition:enter-end="translate-x-0"
                   x-transition:leave="transition ease-in duration-200"
                   x-transition:leave-start="translate-x-0"
                   x-transition:leave-end="translate-x-full">
                <div class="flex items-center justify-between mb-4">
                  <div>
                    <h3 class="font-heading text-lg font-semibold">Edit Profile</h3>
                    <p class="text-sm text-muted-foreground">Make changes to your profile here.</p>
                  </div>
                  <button @click="close()" class="mw-btn mw-btn-ghost mw-btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                  </button>
                </div>
                <div class="border-t border-border mb-4"></div>
                <div class="space-y-4">
                  <div>
                    <label class="mw-label">Name</label>
                    <input type="text" class="mw-input mt-1.5" placeholder="Your name" value="John Doe">
                  </div>
                  <div>
                    <label class="mw-label">Email</label>
                    <input type="email" class="mw-input mt-1.5" placeholder="you@example.com" value="john@example.com">
                  </div>
                  <div>
                    <label class="mw-label">Bio</label>
                    <textarea class="mw-textarea mt-1.5" placeholder="Tell us about yourself"></textarea>
                  </div>
                </div>
                <div class="flex justify-end gap-2 mt-6">
                  <button @click="close()" class="mw-btn mw-btn-outline">Cancel</button>
                  <button @click="close()" class="mw-btn mw-btn-primary">Save Changes</button>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="w-full max-w-lg mx-auto">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-heading text-lg font-semibold">Product Catalog</h3>
            <div x-data="mwSheet()">
              <button @click="show()" class="mw-btn mw-btn-outline mw-btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
                Filters
              </button>
              <template x-teleport="body">
                <div x-show="open" class="fixed inset-0 z-50" x-cloak>
                  <div class="mw-overlay" @click="close()"
                       x-transition:enter="transition ease-out duration-300"
                       x-transition:enter-start="opacity-0"
                       x-transition:enter-end="opacity-100"
                       x-transition:leave="transition ease-in duration-200"
                       x-transition:leave-start="opacity-100"
                       x-transition:leave-end="opacity-0"></div>
                  <div class="mw-sheet mw-sheet-right"
                       x-transition:enter="transition ease-out duration-300"
                       x-transition:enter-start="translate-x-full"
                       x-transition:enter-end="translate-x-0"
                       x-transition:leave="transition ease-in duration-200"
                       x-transition:leave-start="translate-x-0"
                       x-transition:leave-end="translate-x-full">
                    <div class="flex items-center justify-between mb-4">
                      <div>
                        <h3 class="font-heading text-lg font-semibold">Filters</h3>
                        <p class="text-sm text-muted-foreground">Narrow down your results.</p>
                      </div>
                      <button @click="close()" class="mw-btn mw-btn-ghost mw-btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                      </button>
                    </div>
                    <div class="border-t border-border mb-4"></div>
                    <div class="space-y-5">
                      <div>
                        <label class="mw-label">Category</label>
                        <select class="mw-input mt-1.5">
                          <option>All Categories</option>
                          <option>Electronics</option>
                          <option>Clothing</option>
                          <option>Home & Garden</option>
                        </select>
                      </div>
                      <div>
                        <label class="mw-label">Price Range</label>
                        <div class="grid grid-cols-2 gap-2 mt-1.5">
                          <input type="text" class="mw-input" placeholder="Min">
                          <input type="text" class="mw-input" placeholder="Max">
                        </div>
                      </div>
                      <div>
                        <label class="mw-label">Sort By</label>
                        <select class="mw-input mt-1.5">
                          <option>Relevance</option>
                          <option>Price: Low to High</option>
                          <option>Price: High to Low</option>
                          <option>Newest</option>
                        </select>
                      </div>
                    </div>
                    <div class="flex justify-end gap-2 mt-6">
                      <button @click="close()" class="mw-btn mw-btn-outline">Reset</button>
                      <button @click="close()" class="mw-btn mw-btn-primary">Apply Filters</button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          <div class="space-y-2">
            <div class="flex items-center justify-between rounded-lg border border-border p-3">
              <div>
                <p class="text-sm font-medium">Wireless Headphones</p>
                <p class="text-xs text-muted-foreground">Electronics</p>
              </div>
              <span class="text-sm font-semibold">$89.99</span>
            </div>
            <div class="flex items-center justify-between rounded-lg border border-border p-3">
              <div>
                <p class="text-sm font-medium">Cotton T-Shirt</p>
                <p class="text-xs text-muted-foreground">Clothing</p>
              </div>
              <span class="text-sm font-semibold">$24.99</span>
            </div>
            <div class="flex items-center justify-between rounded-lg border border-border p-3">
              <div>
                <p class="text-sm font-medium">Desk Lamp</p>
                <p class="text-xs text-muted-foreground">Home & Garden</p>
              </div>
              <span class="text-sm font-semibold">$45.00</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={sheetCode} lang="html" />
      </div>
    </section>

    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="overflow-x-auto rounded-lg border border-border">
        <table class="docs-api-table">
          <thead><tr><th>Property/Method</th><th>Type</th><th>Description</th></tr></thead>
          <tbody>
            <tr>
              <td><code>open</code></td>
              <td>Boolean</td>
              <td>Sheet visibility state</td>
            </tr>
            <tr>
              <td><code>show()</code></td>
              <td>Method</td>
              <td>Open the sheet</td>
            </tr>
            <tr>
              <td><code>close()</code></td>
              <td>Method</td>
              <td>Close the sheet</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="overflow-x-auto rounded-lg border border-border mt-4">
        <table class="docs-api-table">
          <thead><tr><th>Class</th><th>Description</th></tr></thead>
          <tbody>
            <tr>
              <td><code>mw-sheet</code></td>
              <td>Base panel (fixed, z-51, background, border, shadow, padding)</td>
            </tr>
            <tr>
              <td><code>mw-sheet-right</code></td>
              <td>Slides in from the right (24rem width)</td>
            </tr>
            <tr>
              <td><code>mw-sheet-left</code></td>
              <td>Slides in from the left</td>
            </tr>
            <tr>
              <td><code>mw-sheet-top</code></td>
              <td>Slides down from the top</td>
            </tr>
            <tr>
              <td><code>mw-sheet-bottom</code></td>
              <td>Slides up from the bottom</td>
            </tr>
            <tr>
              <td><code>mw-overlay</code></td>
              <td>Backdrop (closes sheet on click)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Add role="dialog" and aria-modal="true" to the sheet panel for proper semantic markup</li>
            <li>Use aria-labelledby on the sheet panel to reference the sheet title heading</li>
            <li>When the sheet opens, focus should move to the first interactive element</li>
            <li>Pressing Escape should close the sheet via @keydown.escape</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>On close, focus should return to the trigger button</li>
            <li>The overlay backdrop provides a clear visual indication of modal state</li>
            <li>Use direction classes (mw-sheet-right, mw-sheet-left) to match the content context</li>
            <li>Include a visible close button inside the sheet header</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
