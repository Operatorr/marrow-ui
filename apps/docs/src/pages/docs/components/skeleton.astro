---
import DocsLayout from "../../../layouts/DocsLayout.astro";
import CodeBlock from "../../../components/CodeBlock.astro";
import { loadTemplate } from "../../../utils/template-loader";

const t = loadTemplate("skeleton");
const cardSkeletonCode = t.sections.get("Card Skeleton")!;
const textSkeletonCode = t.sections.get("Text Skeleton")!;
const avatarSkeletonCode = t.sections.get("Avatar Skeleton")!;
---

<DocsLayout title="Skeleton" description="Placeholder loading animations for content that is not yet available" activeComponent="skeleton">
  <div class="space-y-12">

    <header>
      <div class="flex items-center gap-3 mb-4">
        <span class="docs-badge">Typography & Micro</span>
        <span class="docs-badge-primary docs-badge">Pure CSS</span>
      </div>
      <h1 class="docs-hero-title">Skeleton</h1>
      <p class="docs-hero-description mt-3">Skeleton loaders indicate where content will appear while data is being fetched or rendered. Uses a pulsing animation with no JavaScript required.</p>
    </header>

    <section>
      <span class="docs-section-label">Preview</span>
      <div class="docs-stage space-y-8">
        <!-- Card Skeleton -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Card Skeleton</p>
          <div class="max-w-md">
            <div class="rounded-lg border border-border bg-card p-6">
              <div class="flex items-center gap-4">
                <div class="mw-skeleton rounded-full" style="width: 3rem; height: 3rem;"></div>
                <div class="flex-1 space-y-2">
                  <div class="mw-skeleton" style="height: 0.875rem; width: 60%;"></div>
                  <div class="mw-skeleton" style="height: 0.75rem; width: 40%;"></div>
                </div>
              </div>
              <div class="mt-4 space-y-2">
                <div class="mw-skeleton" style="height: 0.75rem; width: 100%;"></div>
                <div class="mw-skeleton" style="height: 0.75rem; width: 90%;"></div>
                <div class="mw-skeleton" style="height: 0.75rem; width: 75%;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Text Lines -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Text Lines</p>
          <div class="max-w-md">
            <div class="rounded-lg border border-border bg-card p-6">
              <div class="space-y-3">
                <div class="mw-skeleton" style="height: 1rem; width: 35%;"></div>
                <div class="mw-skeleton" style="height: 0.75rem; width: 100%;"></div>
                <div class="mw-skeleton" style="height: 0.75rem; width: 100%;"></div>
                <div class="mw-skeleton" style="height: 0.75rem; width: 80%;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Avatar Placeholders -->
        <div>
          <p class="text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 mb-3">Avatar Placeholders</p>
          <div class="flex gap-3">
            <div class="mw-skeleton rounded-full" style="width: 2.5rem; height: 2.5rem;"></div>
            <div class="mw-skeleton rounded-full" style="width: 2.5rem; height: 2.5rem;"></div>
            <div class="mw-skeleton rounded-full" style="width: 2.5rem; height: 2.5rem;"></div>
            <div class="mw-skeleton rounded-full" style="width: 2.5rem; height: 2.5rem;"></div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">In Context</span>
      <div class="docs-stage">
        <div class="max-w-2xl mx-auto space-y-6">
          <h3 class="font-heading text-lg font-semibold">Loading Dashboard</h3>
          <div class="grid md:grid-cols-3 gap-4">
            <!-- Stat Card Skeleton 1 -->
            <div class="rounded-lg border border-border bg-card p-5 space-y-3">
              <div class="mw-skeleton" style="height: 0.75rem; width: 50%;"></div>
              <div class="mw-skeleton" style="height: 1.5rem; width: 40%;"></div>
              <div class="mw-skeleton" style="height: 0.625rem; width: 70%;"></div>
            </div>
            <!-- Stat Card Skeleton 2 -->
            <div class="rounded-lg border border-border bg-card p-5 space-y-3">
              <div class="mw-skeleton" style="height: 0.75rem; width: 60%;"></div>
              <div class="mw-skeleton" style="height: 1.5rem; width: 35%;"></div>
              <div class="mw-skeleton" style="height: 0.625rem; width: 65%;"></div>
            </div>
            <!-- Stat Card Skeleton 3 -->
            <div class="rounded-lg border border-border bg-card p-5 space-y-3">
              <div class="mw-skeleton" style="height: 0.75rem; width: 45%;"></div>
              <div class="mw-skeleton" style="height: 1.5rem; width: 50%;"></div>
              <div class="mw-skeleton" style="height: 0.625rem; width: 60%;"></div>
            </div>
          </div>
          <!-- Activity Feed Skeleton -->
          <div class="rounded-lg border border-border bg-card p-5 space-y-4">
            <div class="mw-skeleton" style="height: 0.875rem; width: 30%;"></div>
            <div class="space-y-3">
              <div class="flex items-center gap-3">
                <div class="mw-skeleton rounded-full" style="width: 2rem; height: 2rem;"></div>
                <div class="flex-1 space-y-1.5">
                  <div class="mw-skeleton" style="height: 0.75rem; width: 70%;"></div>
                  <div class="mw-skeleton" style="height: 0.625rem; width: 45%;"></div>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="mw-skeleton rounded-full" style="width: 2rem; height: 2rem;"></div>
                <div class="flex-1 space-y-1.5">
                  <div class="mw-skeleton" style="height: 0.75rem; width: 55%;"></div>
                  <div class="mw-skeleton" style="height: 0.625rem; width: 35%;"></div>
                </div>
              </div>
              <div class="flex items-center gap-3">
                <div class="mw-skeleton rounded-full" style="width: 2rem; height: 2rem;"></div>
                <div class="flex-1 space-y-1.5">
                  <div class="mw-skeleton" style="height: 0.75rem; width: 65%;"></div>
                  <div class="mw-skeleton" style="height: 0.625rem; width: 40%;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Code</span>
      <div class="space-y-4">
        <CodeBlock code={cardSkeletonCode} lang="html" />
        <CodeBlock code={textSkeletonCode} lang="html" />
        <CodeBlock code={avatarSkeletonCode} lang="html" />
      </div>
    </section>

    <section>
      <span class="docs-section-label">API Reference</span>
      <div class="overflow-x-auto rounded-lg border border-border">
        <table class="docs-api-table">
          <thead>
            <tr>
              <th>Class</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>mw-skeleton</code></td><td>Base skeleton loader with muted background and pulse animation (2s duration)</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section>
      <span class="docs-section-label">Guidelines</span>
      <div class="space-y-4">
        <div class="docs-note">
          <p><strong>Accessibility</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Add <code>aria-busy="true"</code> to the parent container while content is loading</li>
            <li>Add <code>aria-live="polite"</code> to announce when content has finished loading</li>
            <li>Provide alternative text indicating that content is loading for screen reader users</li>
            <li>The pulse animation respects <code>prefers-reduced-motion</code> system preferences</li>
          </ul>
        </div>
        <div class="docs-note">
          <p><strong>Best Practices</strong></p>
          <ul class="list-disc list-inside mt-2 space-y-1">
            <li>Match skeleton dimensions to the actual content that will replace them</li>
            <li>For circular skeletons (avatars, profile images), add <code>rounded-full</code></li>
            <li>Set width and height via inline styles or utility classes</li>
            <li>Use varying widths for text line skeletons to look more natural</li>
            <li>No JavaScript is required &mdash; the pulse animation is handled by CSS</li>
          </ul>
        </div>
      </div>
    </section>

  </div>
</DocsLayout>
